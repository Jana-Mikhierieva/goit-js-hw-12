{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com';\nexport const fetchImg = async (searchQuery, page) => {\n    const axiosOptions = {\n        params: {\n            q: searchQuery,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: 15,\n            page: page,\n            key: '45504583-80571ec5a383edfe03322cd8c',\n        },\n    };\n    const response = await axios.get('/api/', axiosOptions);\n    return response;\n}","export const createGalleryCardTemplate = infoImg => {\n    return `\n    <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${infoImg.largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${infoImg.webformatURL}\" alt=\"${infoImg.tags}\" />\n        </a>\n        <div class=\"image-info\">\n            <p class=\"img-descr\"><span class=\"text-descr\">Likes</span><span class=\"quantity-descr\">${infoImg.likes}</span></p>\n            <p class=\"img-descr\"><span class=\"text-descr\">Views</span><span class=\"quantity-descr\">${infoImg.views}</span></p>\n            <p class=\"img-descr\"><span class=\"text-descr\">Comments</span><span class=\"quantity-descr\">${infoImg.comments}</span></p>\n            <p class=\"img-descr\"><span class=\"text-descr\">Downloads</span><span class=\"quantity-descr\">${infoImg.downloads}</span></p>\n        </div>\n        </li>`\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport { fetchImg } from \"./js/pixabay-api\";\nimport { createGalleryCardTemplate } from \"./js/render-functions\";\nconst form = document.querySelector('.js-search-form');\nconst gallerySelected = document.querySelector('.js-gallery');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nlet currentPage = 1;\nlet searchInput = '';\nlet cardHight = 0;\nconst lightbox = new SimpleLightbox('.js-gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        captions: true,\n        animationSpeed: 300,\n        close: true,\n});\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-more');\nlet totalLoadedImages = 0;\nconst handleSubmit = async event => {\n    try {\n        event.preventDefault();\n        gallerySelected.innerHTML = '';\n        searchInput = form.elements.user_query.value.trim();\n        loadMoreBtn.classList.add('is-hidden');\n        currentPage = 1;\n        if (!searchInput) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Please fill in the field!',\n                position: 'topRight',\n                maxWidth: '400px',\n                backgroundColor: '#daff00',\n            });\n            return;\n        }\n        loader.classList.remove('is-hidden');\n        const response = await fetchImg(searchInput, currentPage); \n        totalLoadedImages += response.data.hits.length;\n        if (response.data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                maxWidth: '400px',\n                backgroundColor: '#daff00',\n            });\n            return;\n        };\n        const cardsGalleryList = response.data.hits.map(card => createGalleryCardTemplate(card)).join('');\n        gallerySelected.innerHTML = cardsGalleryList;\n        const galleryCard = gallerySelected.querySelector('li');\n        cardHight = galleryCard.getBoundingClientRect().height;\n        loadMoreBtn.classList.remove('is-hidden');\n        lightbox.refresh();\n    } catch (err) {\n        console.error(err);\n        iziToast.error({\n            title: 'Error',\n            message: 'Oops! Error! Try again later!',\n            position: 'topRight',\n            maxWidth: '400px',\n            backgroundColor: '#daff00',\n        });\n    } finally {\n        form.reset();\n        loader.classList.add('is-hidden');\n    }\n};\nconst onLoadMoreClick = async event => {\n    try {\n        currentPage++;\n        loaderMore.classList.remove('is-hidden');        \n        const response = await fetchImg(searchInput, currentPage);\n        totalLoadedImages += response.data.hits.length;     \n        const cardsGalleryList = response.data.hits.map(card => {\n            return createGalleryCardTemplate(card)\n        }).join('');\n        gallerySelected.insertAdjacentHTML('beforeend', cardsGalleryList); \n        scrollBy({\n            top: cardHight * 2,\n            behavior: 'smooth',\n        })\n        if (totalLoadedImages >= response.data.totalHits) { \n            loadMoreBtn.classList.add('is-hidden');\n            iziToast.info({\n            title: 'Hello!',\n            message: 'We are sorry, but you have reached the end of search results!',\n            position: 'topRight',\n            maxWidth: '400px',\n            backgroundColor: '#daff00',\n        });\n        };\n    } catch (err) {\n        console.error(err); \n        iziToast.error({\n        title: 'Error',\n        message: 'Oops! Error! Try again later!',\n        position: 'topRight',\n        maxWidth: '400px',\n        backgroundColor: '#daff00',\n        });\n    } finally {\n        loaderMore.classList.add('is-hidden');        \n    }\n};\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);"],"names":["axios","fetchImg","searchQuery","page","axiosOptions","createGalleryCardTemplate","infoImg","form","gallerySelected","loadMoreBtn","currentPage","searchInput","cardHight","lightbox","SimpleLightbox","loader","loaderMore","totalLoadedImages","handleSubmit","event","iziToast","response","cardsGalleryList","card","err","onLoadMoreClick"],"mappings":"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"}